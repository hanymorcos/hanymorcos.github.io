{"pageProps":{"post":{"title":"How to add Google Analytics to your NextJs Application?","publishedAt":"July 28, 2022","description":"I spent couple of days trying to figure out the best approach to add my site to google Analytics. I tried to just insert gtag.js javascript code in the header. But I wasn't satisified with the way it worked or fit into my design. ","cover":"/optimized/articles/1-Adding-Google-Analytics-to-NextJS/google_analytics.webp","category":"Setup","coverWidth":"1411","coverHeight":"682","body":{"raw":"\n\n## TL;DR\n\n- ðŸŒ³ We'll talk about how to use an NPM to connect our site to Google Analytics\n\n---\n\nI spent a long time determinning the correct approach to add my site to google analytics. Google only provides\na javascript snippet to add to your header menu. I didn't like the approach, it didn't go nicely with hour my\nwebsite was implemented. After doing some research and read few github chats and issues, I stumpled on a Node\npackage that I could use for my site. \n\nThe package is called analytics, by Davide Wells. https://github.com/DavidWells/analytics . The packge provides a hook, use-analtyics as a separate package,\nwhich I used to wrap my Components tag in _app.tsx. \n\n\nThe final code ðŸ˜Ž:\n```typescript\nimport googleAnalytics from '@analytics/google-analytics'\nimport { Analytics } from 'analytics'\nimport { AnalyticsProvider, useAnalytics } from 'use-analytics'\n\n/* Initialize analytics & load plugins */\nconst analytics = Analytics({\n  app: 'awesome-app',\n  plugins: [\n    googleAnalytics({\n      measurementIds: ['<YOUR Analytics Profile ID>'],\n    }),\n  ],\n})\n\nfunction MyApp({ Component, pageProps }) {\n  return (\n    <AnalyticsProvider instance={analytics}>\n     <div id=\"outer-container\">\n          <Nav />\n          <Menubar />\n          <div id=\"page-wrap\">\n            <Component {...pageProps} />\n            <Footer />\n          </div>\n        </div>\n    </AnalyticsProvider>\n    )\n    };\n```","code":"var Component=(()=>{var r=Object.create;var l=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var d=Object.getOwnPropertyNames;var h=Object.getPrototypeOf,m=Object.prototype.hasOwnProperty;var o=a=>l(a,\"__esModule\",{value:!0});var N=(a,n)=>()=>(n||a((n={exports:{}}).exports,n),n.exports),u=(a,n)=>{o(a);for(var s in n)l(a,s,{get:n[s],enumerable:!0})},k=(a,n,s)=>{if(n&&typeof n==\"object\"||typeof n==\"function\")for(let c of d(n))!m.call(a,c)&&c!==\"default\"&&l(a,c,{get:()=>n[c],enumerable:!(s=p(n,c))||s.enumerable});return a},g=a=>k(o(l(a!=null?r(h(a)):{},\"default\",a&&a.__esModule&&\"default\"in a?{get:()=>a.default,enumerable:!0}:{value:a,enumerable:!0})),a);var i=N((A,t)=>{t.exports=_jsx_runtime});var f={};u(f,{default:()=>w});var e=g(i());function y(a={}){let n=Object.assign({h2:\"h2\",a:\"a\",span:\"span\",ul:\"ul\",li:\"li\",hr:\"hr\",p:\"p\",pre:\"pre\",code:\"code\"},a.components),{wrapper:s}=n,c=(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(n.h2,{id:\"tldr\",children:[(0,e.jsx)(n.a,{className:\"anchor\",href:\"#tldr\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"TL;DR\"]}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.span,{role:\"img\",\"aria-label\":\"deciduous tree\",children:\"\\u{1F333}\"}),\" We'll talk about how to use an NPM to connect our site to Google Analytics\"]}),`\n`]}),`\n`,(0,e.jsx)(n.hr,{}),`\n`,(0,e.jsx)(n.p,{children:`I spent a long time determinning the correct approach to add my site to google analytics. Google only provides\na javascript snippet to add to your header menu. I didn't like the approach, it didn't go nicely with hour my\nwebsite was implemented. After doing some research and read few github chats and issues, I stumpled on a Node\npackage that I could use for my site.`}),`\n`,(0,e.jsxs)(n.p,{children:[\"The package is called analytics, by Davide Wells. \",(0,e.jsx)(n.a,{href:\"https://github.com/DavidWells/analytics\",children:\"https://github.com/DavidWells/analytics\"}),` . The packge provides a hook, use-analtyics as a separate package,\nwhich I used to wrap my Components tag in _app.tsx.`]}),`\n`,(0,e.jsxs)(n.p,{children:[\"The final code \",(0,e.jsx)(n.span,{role:\"img\",\"aria-label\":\"smiling face with sunglasses\",children:\"\\u{1F60E}\"}),\":\"]}),`\n`,(0,e.jsx)(n.pre,{className:\"language-typescript\",children:(0,e.jsxs)(n.code,{className:\"language-typescript code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"import\"}),\" googleAnalytics \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"from\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'@analytics/google-analytics'\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"import\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" Analytics \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"from\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'analytics'\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"import\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" AnalyticsProvider\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" useAnalytics \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"from\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'use-analytics'\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"/* Initialize analytics & load plugins */\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" analytics \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"Analytics\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  app\",(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'awesome-app'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  plugins\",(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token function\",children:\"googleAnalytics\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      measurementIds\",(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'<YOUR Analytics Profile ID>'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"function\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"MyApp\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" Component\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" pageProps \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"return\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"<\"}),\"AnalyticsProvider instance\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\"analytics\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\">\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"     \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"<\"}),\"div id\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token string\",children:'\"outer-container\"'}),(0,e.jsx)(n.span,{className:\"token operator\",children:\">\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"<\"}),\"Nav \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"/\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\">\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"<\"}),\"Menubar \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"/\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\">\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"<\"}),\"div id\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token string\",children:'\"page-wrap\"'}),(0,e.jsx)(n.span,{className:\"token operator\",children:\">\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"            \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"<\"}),\"Component \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"...\"}),\"pageProps\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"/\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\">\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"            \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"<\"}),\"Footer \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"/\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\">\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"<\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"/\"}),\"div\",(0,e.jsx)(n.span,{className:\"token operator\",children:\">\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"<\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"/\"}),\"div\",(0,e.jsx)(n.span,{className:\"token operator\",children:\">\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"<\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"/\"}),\"AnalyticsProvider\",(0,e.jsx)(n.span,{className:\"token operator\",children:\">\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]})]})})]});return s?(0,e.jsx)(s,Object.assign({},a,{children:c})):c}var w=y;return f;})();\n;return Component.default;"},"_id":"articles/1-Adding-Google-Analytics-to-NextJS.mdx","_raw":{"sourceFilePath":"articles/1-Adding-Google-Analytics-to-NextJS.mdx","sourceFileName":"1-Adding-Google-Analytics-to-NextJS.mdx","sourceFileDir":"articles","bodyType":"mdx","flattenedPath":"articles/1-Adding-Google-Analytics-to-NextJS"},"type":"Article","readingTime":{"text":"1 min read","minutes":0.96,"time":57600,"words":192},"wordCount":193,"slug":"1-Adding-Google-Analytics-to-NextJS"}},"__N_SSG":true}